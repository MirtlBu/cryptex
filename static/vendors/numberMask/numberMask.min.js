(function(e){e.fn.numberMask=function(t){var n={type:"int",beforePoint:10,afterPoint:2,defaultValueInput:0,decimalMark:".",pattern:""},r=function(e){var t=e.which;if(e.ctrlKey||e.altKey||e.metaKey||t<32){return true}else if(t){var r=String.fromCharCode(t);var i=e.target.value;var o=s(e.target);if(o.statusSelection){i=i.substring(0,o.start)+r+i.substring(o.end)}else{i+=r}if(typeof n.pattern=="object"&&n.pattern instanceof RegExp){var u=n.pattern}else{if(n.type=="int"){var u=new RegExp("^\\d{1,"+n.beforePoint+"}$","ig")}else if(n.type=="float"){var u=new RegExp("^\\d{1,"+n.beforePoint+"}$|^\\d{1,"+n.beforePoint+"}\\"+n.decimalMark+"\\d{0,"+n.afterPoint+"}$","ig")}}return u.test(i)}},i=function(t){var n=e(t.target);if(t.which==13||t.which==86){n.val(u(n))}},s=function(e){var t=0,n=0,r,i,s,o,u,a=false;if(typeof e.selectionStart=="number"&&typeof e.selectionEnd=="number"){t=e.selectionStart;n=e.selectionEnd}else{i=document.selection.createRange();if(i&&i.parentElement()==e){o=e.value.length;r=e.value.replace(/\r\n/g,"\n");s=e.createTextRange();s.moveToBookmark(i.getBookmark());u=e.createTextRange();u.collapse(false);if(s.compareEndPoints("StartToEnd",u)>-1){t=n=o}else{t=-s.moveStart("character",-o);t+=r.slice(0,t).split("\n").length-1;if(s.compareEndPoints("EndToEnd",u)>-1){n=o}else{n=-s.moveEnd("character",-o);n+=r.slice(0,n).split("\n").length-1}}}}if(t-n!=0){a=true}return{start:t,end:n,statusSelection:a}},o=function(t){var n=e(t.target);if(n.val()!=""){n.val(u(n))}},u=function(e){var t=e.val();if(typeof n.pattern=="object"&&n.pattern instanceof RegExp){var r=n.pattern;if(r.test(t)){return t}else{return n.defaultValueInput}}else{if(n.type=="int"){var r=new RegExp("^\\d{1,"+n.beforePoint+"}$","ig");if(r.test(t)){return t}else{return n.defaultValueInput}}else{var r=new RegExp("^\\d{1,"+n.beforePoint+"}$|^\\d{1,"+n.beforePoint+"}\\"+n.decimalMark+"\\d{1,"+n.afterPoint+"}$","ig");if(r.test(t)){return t}else{return n.defaultValueInput}}}};this.bind("keypress",r).bind("keyup",i).bind("blur",o);if(t){e.extend(n,t)}return this}})(jQuery)